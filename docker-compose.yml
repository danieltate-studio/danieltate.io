version: '3.8'

services:
  personal-website:
    image: danieltate888/personal-website:latest
    ports:
      - "55001:55001"
    restart: always

  watchtower:
    image: containrrr/watchtower
    container_name: watchtower
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    command: --interval 30 --cleanup
    environment:
      - WATCHTOWER_NOTIFICATIONS=email
      - WATCHTOWER_NOTIFICATION_EMAIL_FROM=daniel@danieltate.io
      - WATCHTOWER_NOTIFICATION_EMAIL_TO=deployment@danieltate.io
      - WATCHTOWER_NOTIFICATION_EMAIL_SERVER=smtp.zoho.com.au
      - WATCHTOWER_NOTIFICATION_EMAIL_SERVER_PORT=465
      - WATCHTOWER_NOTIFICATION_EMAIL_SERVER_USER=daniel@danieltate.io
      - WATCHTOWER_NOTIFICATION_EMAIL_SERVER_PASSWORD=${ZOHO_SMTP_PASSWORD}
    restart: always

# If need to build the image when run the container, uncomment the following lines:
#    build:
#      context: .
#      dockerfile: Dockerfile